---
title: "Bike Share Analysis and Daily Users Predictor"
author: "Vera Danilova, Jenna Le Noble, Moira Renata, Yuyang Wang"
output: 
  bookdown::html_document2:
    default
bibliography: references.bib
---

# Introduction

Bike sharing in Seoul, Korea was founded in 2015 and has grown to become the cityâ€™s most popular form of public transportation, gaining over 100 million users in 6 and a half years. It became popular as many citizens favored traveling shorter distances by bike rather than taking crowded transit. Amidst the pandemic, users skyrocketed as many people found it a useful means of transportation to avoid crowded public transit [@ajudaily]. While this played a factor in an increase in users, there are still other factors that come into play that determine whether citizens are willing to use bikes as a mode of transportation. The question we will be trying to answer with our project is: In 2018, in Seoul, Korea, what were the strongest environmental predictors of the quantity of bikes rented out each day, and how effectively can those predictors be used to predict the number of bikes rented out in a given day given the environmental conditions of that day? Our dataset contains information on the weather and environmental factors of each hour of each day during 2018. The observations in the data set report on temperature, humidity, windspeed, visibility, dewpoint, solar radiation, snowfall, and rainfall. The dataset also includes observations relating to whether the bike rental facility was functional during that particular day, and whether the given day was a holiday.

# Methods & Results

```{r include = FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
source(here::here("R/data_loading_cleaning.R"))
source(here::here("R/linear_regression_analysis.R"))
source(here::here("R/eda_and_splitting.R"))
```

```{r bike-data-table, out.wdith="75%"}
knitr::kable(head(bike_data), caption = "Original Bike Data")
```

Table \@ref(tab:bike-data-table) presents the original bike share data from the internet, which includes all of the variables and their units.

Next, we wrangle our data into tidy format and group the number of rented bikes by day. This produces a table of our clean data which includes the 8 different environmental factors that we wish to explore.

```{r bike-data-clean-table}
knitr::kable(head(bike_data_clean), caption = "Clean Bike Data")
```

Table \@ref(tab:bike-data-clean-table) presents the data in tidy format. The data has been wrangled to group by day instead of by hour.

To further explore our data, we examine the distribution of rented bikes per day with a histogram.

```{r bike-hist, fig.cap="Histogram of rented bikes per day", out.width="60%"}

knitr::include_graphics(here::here("output/bike_histogram.png"))
```


The distribution in Figure \@ref(fig:bike-hist) shows that the number of rented bikes per day takes on a bimodal shape with two peaks. The distribution ranges from `r bike_count_min` to `r bike_count_max` bikes rented, with a mean of `r bike_count_mean` bikes rented per day.

After splitting our data into a training set (70%) and testing set, we assess the correlation between the amount of bikes rented and of the environmental/weather predictors.

```{r bike-ggpairs, fig.cap="Scatter plots of all variables plotted against each other and their correlation coefficients", out.width="60%"}

knitr::include_graphics(here::here("output/bike_correlations_ggpairs.png"))
```

We can visualize which environmental factors correlate best with bikes rented per day with a bar graph.

```{r bike-cor, fig.cap="Strength of correlation between bike count and environmental factors", out.width="60%"}

knitr::include_graphics(here::here("output/bike_count_barplot.png"))
```

From Figure \@ref(fig:bike-cor), we note that temperature, solar radiation, and dew point temperature have the strongest correlation with bikes rented per day by a large margin. However, we also notice that temperature and dew point temperature are very strongly correlated to each other as shown in Figure \@ref(fig:bike-ggpairs), with a correlation coefficient of 0.966, so including both factors would likely give twice the priority to the temperature that day. Additionally, the correlation coefficient for dew point and bike count is less than 0.7, so it is not a very strong correlation. Therefore, we determine that it would be most appropriate to simply include only temperature and solar radiation as the predictors, since both of their correlation coefficients are above 0.7.

Now that we have identified the environmental factors that have the greatest correlation with bike count, we can begin to construct our models. We want to compare linear regression and K-NN regression models to guage which model is most accurate. We will begin with linear regression.

# References